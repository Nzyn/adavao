# Email Configuration for AlertDavao Email Verification
# Copy this file to .env and fill in your credentials

# ============================================
# EMAIL SETTINGS (SendGrid - uses HTTP, works on Render free tier)
# ============================================

# Get your API key from https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# From email (use any email - SendGrid allows this on free tier)
SENDGRID_FROM_EMAIL=noreply@alertdavao.com

# How to set up SendGrid:
# 1. Sign up at https://sendgrid.com (free - 100 emails/day)
# 2. Go to Settings > API Keys
# 3. Create API Key with "Full Access"
# 4. Copy the key (starts with SG.)
# 5. Add to Render environment variables

# ============================================
# GOOGLE SIGN-IN SETTINGS
# ============================================

GOOGLE_WEB_CLIENT_ID=YOUR_WEB_CLIENT_ID.apps.googleusercontent.com

# How to get Google Web Client ID:
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project: AlertDavao
# 3. Go to APIs & Services > Credentials
# 4. Create OAuth 2.0 Client ID
# 5. Application type: Web application
# 6. Add authorized redirect URI: https://auth.expo.io/@your-expo-username/UserSide
# 7. Copy the Client ID here
#
# Run: npx expo whoami (to get your Expo username)

# ============================================
# TWILIO SMS SETTINGS (for OTP)
# ============================================

# Twilio credentials for SMS OTP delivery
TWILIO_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_TOKEN=your_auth_token_here
TWILIO_FROM=+1234567890

# How to get Twilio credentials:
# 1. Sign up at https://www.twilio.com/
# 2. Go to Console Dashboard
# 3. Copy Account SID and Auth Token
# 4. Buy a phone number or use trial number
# 5. Paste credentials above
#
# Note: In development, OTPs are logged to console if Twilio is not configured

# ============================================
# APPLICATION SETTINGS
# ============================================

NODE_ENV=development  # Set to 'production' for live deployment
BACKEND_URL=http://localhost:3000  # Backend URL for email links
PORT=3000  # Server port

# ============================================
# DATABASE SETTINGS
# ============================================

DB_HOST=127.0.0.1
DB_USER=root
DB_PASSWORD=1234
DB_NAME=alertdavao

# ============================================
# CLOUDINARY SETTINGS (for persistent file storage)
# ============================================

# Get these from https://cloudinary.com/console
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# ============================================
# MEDIA MODERATION (Sensitive media detection)
# ============================================

# Enable server-side media moderation checks
MEDIA_MODERATION_ENABLED=0

# If enabled, require a moderation provider (Cloudinary) to be configured.
# When set to 1, evidence uploads will be rejected if Cloudinary/moderation is unavailable.
MEDIA_MODERATION_REQUIRE=0

# Cloudinary moderation add-on name(s).
# IMPORTANT: Use *_IMAGE for images and *_VIDEO for videos so image-only moderation
# doesn't break video uploads.
#
# Tip: auto-detect the correct IMAGE value by running:
#   node scripts/detect-cloudinary-moderation.js
# (requires CLOUDINARY_* creds in your local .env)

# Images (recommended with Amazon Rekognition AI Moderation)
CLOUDINARY_MODERATION_IMAGE=

# Videos (optional; only set if you subscribed to a video moderation add-on)
CLOUDINARY_MODERATION_VIDEO=

# Backward-compatible (if you set only this, it's treated as image moderation)
CLOUDINARY_MODERATION=

# Optional: override the test URL used by the detection script
MODERATION_TEST_IMAGE_URL=

# When moderation is pending, either 'reject' (safer) or 'allow'
MEDIA_MODERATION_PENDING_ACTION=reject

# Block patterns (comma-separated, matched against moderation labels)
MEDIA_MODERATION_BLOCK_PATTERNS=explicit nudity,nudity,sexual activity,pornography

# Confidence threshold (0-100) for blocking label matches
MEDIA_MODERATION_BLOCK_THRESHOLD=75

# ============================================
# REPORT ABUSE PREVENTION (backend throttling)
# ============================================

# Express rate limit (global) for /api/reports
REPORT_RATE_LIMIT_WINDOW_MS=300000
REPORT_RATE_LIMIT_MAX=30

# DB-backed throttling windows/limits (effective if report_ip_tracking exists)
REPORT_ABUSE_WINDOW_MINUTES=10
REPORT_ABUSE_IP_LIMIT=10
REPORT_ABUSE_USER_LIMIT=5
REPORT_ABUSE_COOLDOWN_SECONDS=20

# Duplicate report prevention (same account)
# Blocks multiple report submissions by the same account within this time window.
DUPLICATE_REPORT_WINDOW_MINUTES=10

# How to set up Cloudinary:
# 1. Sign up at https://cloudinary.com/ (free - 25GB storage)
# 2. Go to Dashboard
# 3. Copy Cloud Name, API Key, and API Secret
# 4. Add to Render environment variables
#
# IMPORTANT: Without Cloudinary, uploaded files are lost when Render redeploys!
